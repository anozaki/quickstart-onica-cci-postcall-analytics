{"ast":null,"code":"import _slicedToArray from\"/Users/sshvans/Documents/work/quickstart/quickstart-onica-cci-postcall-analytics/assets/portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{makeStyles}from'@material-ui/core/styles';import IconButton from'@material-ui/core/IconButton';import Typography from'@material-ui/core/Typography';import PlayArrowIcon from'@material-ui/icons/PlayCircleFilled';import PauseIcon from'@material-ui/icons/PauseCircleFilled';import ExpansionPanel from'@material-ui/core/ExpansionPanel';import ExpansionPanelDetails from'@material-ui/core/ExpansionPanelDetails';import ExpansionPanelSummary from'@material-ui/core/ExpansionPanelSummary';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';import Divider from'@material-ui/core/Divider';import Grid from'@material-ui/core/Grid';import CircularProgress from'@material-ui/core/CircularProgress';import SentimentVerySatisfiedIcon from'@material-ui/icons/SentimentVerySatisfied';import SentimentSatisfiedIcon from'@material-ui/icons/SentimentSatisfied';import SentimentVeryDissatisfiedIcon from'@material-ui/icons/SentimentVeryDissatisfied';import Chip from'@material-ui/core/Chip';var useStyles=makeStyles(function(theme){return{root:{width:'100%'},chips:{marginRight:5},heading:{fontSize:theme.typography.pxToRem(15)},secondaryHeading:{fontSize:theme.typography.pxToRem(15),color:theme.palette.text.secondary},icon:{verticalAlign:'bottom',height:20,width:20},details:{alignItems:'center'},column:{flexBasis:'33.33%'},helper:{borderLeft:\"2px solid \".concat(theme.palette.divider),padding:theme.spacing(1,2)},link:{color:theme.palette.primary.main,textDecoration:'none','&:hover':{textDecoration:'underline'}},paper:{padding:theme.spacing(2),textAlign:'center',color:theme.palette.text.secondary}};});function TranscriptLine(props){var classes=props.classes;if(!props.turn)return null;return/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12},/*#__PURE__*/React.createElement(Grid,{item:true,xs:10},/*#__PURE__*/React.createElement(Grid,{item:true,xs:10},Emoji[props.turn.sentiment.Sentiment],/*#__PURE__*/React.createElement(Typography,{style:{fontWeight:'bold'},className:classes.heading,component:\"span\"},props.turn.speaker===AGENT?'Agent ':'Customer '),/*#__PURE__*/React.createElement(Typography,{style:{color:'#4186b2'},className:classes.secondaryHeading,component:\"span\"},props.turn.start_time)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:10},props.turn.text)));}var Emoji={'NEGATIVE':/*#__PURE__*/React.createElement(SentimentVeryDissatisfiedIcon,{style:{color:\"#ff9495\"}}),'POSITIVE':/*#__PURE__*/React.createElement(SentimentVerySatisfiedIcon,{style:{color:\"#6cd3aa\"}}),'NEUTRAL':/*#__PURE__*/React.createElement(SentimentSatisfiedIcon,{style:{color:\"#d5d5d5\"}})};var AGENT='AGENT';var CUSTOMER='CUSTOMER';var getSpeaker=function getSpeaker(turn){return turn.hasOwnProperty('channel')?turn.channel:turn.speaker_label;};function getTranscriptTurns(transcript){var agentOrder=parseInt(transcript.sentiment.turns.numChannels===2?transcript.labels.agentChannel:transcript.labels.agentLabel);console.log(agentOrder);var customerOrder=agentOrder===0?1:0;transcript.sentiment.turns.filter(function(t){return getSpeaker(t)===customerOrder;}).map(function(t){return t.speaker=CUSTOMER;});transcript.sentiment.turns.filter(function(t){return getSpeaker(t)===agentOrder;}).map(function(t){return t.speaker=AGENT;});console.log(transcript.sentiment.turns);return transcript.sentiment.turns;}var getCategories=function getCategories(sentiment){return[(sentiment||{}).call_motivation_status,(sentiment||{}).call_resolution_status];};export default function CallCard(props){var classes=useStyles();var playing=props.playing&&props.transcript.audioURI===props.currentKey;var _getCategories=getCategories(props.currentSentiment),_getCategories2=_slicedToArray(_getCategories,2),callMotivation=_getCategories2[0],callResolution=_getCategories2[1];var expanded=props.showing&&props.currentKey===props.transcript.fullTranscriptURI||props.showing&&props.currentKey===props.transcript.audioURI;return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(ExpansionPanel,{expanded:expanded,onClick:function onClick(e){return props.toggleTranscript(e,props.transcript.fullTranscriptURI,props.transcript.analysisURI);},onFocus:function onFocus(event){return event.stopPropagation();}},/*#__PURE__*/React.createElement(ExpansionPanelSummary,{expandIcon:/*#__PURE__*/React.createElement(ExpandMoreIcon,null),\"aria-controls\":\"panel1c-content\",id:\"panel1c-header\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.column},/*#__PURE__*/React.createElement(Typography,{className:classes.heading},\"Contact Summary\"),/*#__PURE__*/React.createElement(Typography,{className:classes.secondaryHeading},\"Uploaded: \",props.transcript.user),/*#__PURE__*/React.createElement(Typography,{className:classes.secondaryHeading},\"Last Modified: \",props.transcript.lastModified)),/*#__PURE__*/React.createElement(\"div\",{className:classes.column,style:{margin:'auto 0'}},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"play/pause\",onClick:function onClick(e){return props.togglePlay(e,props.transcript.audioURI);},onFocus:function onFocus(event){return event.stopPropagation();}},!playing&&/*#__PURE__*/React.createElement(PlayArrowIcon,{className:classes.playIcon}),playing&&/*#__PURE__*/React.createElement(PauseIcon,{className:classes.playIcon})),/*#__PURE__*/React.createElement(Typography,{className:classes.secondaryHeading},props.transcript.transcriptionJobName))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(ExpansionPanelDetails,{className:classes.details},props.currentSentiment&&expanded?/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,style:{paddingBottom:'.5em'}},/*#__PURE__*/React.createElement(Typography,{style:{fontWeight:'bold'},className:classes.secondaryHeading,component:\"span\"},\"Categories\")),/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,style:{paddingBottom:'.5em'}},callMotivation&&/*#__PURE__*/React.createElement(Chip,{className:classes.chips,label:callMotivation,color:\"primary\"}),callResolution&&/*#__PURE__*/React.createElement(Chip,{className:classes.chips,label:callResolution,color:\"primary\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Typography,{style:{fontWeight:'bold'},className:classes.secondaryHeading,component:\"span\"},\"Transcript\")),getTranscriptTurns({labels:props.transcript.labels,sentiment:props.currentSentiment}).map(function(turn,i){return/*#__PURE__*/React.createElement(TranscriptLine,{key:\"transcript-line-\"+i,turn:turn,classes:classes});}))):/*#__PURE__*/React.createElement(CircularProgress,null))));}","map":{"version":3,"sources":["/Users/sshvans/Documents/work/quickstart/quickstart-onica-cci-postcall-analytics/assets/portal/src/calls/CallCard.js"],"names":["React","makeStyles","IconButton","Typography","PlayArrowIcon","PauseIcon","ExpansionPanel","ExpansionPanelDetails","ExpansionPanelSummary","ExpandMoreIcon","Divider","Grid","CircularProgress","SentimentVerySatisfiedIcon","SentimentSatisfiedIcon","SentimentVeryDissatisfiedIcon","Chip","useStyles","theme","root","width","chips","marginRight","heading","fontSize","typography","pxToRem","secondaryHeading","color","palette","text","secondary","icon","verticalAlign","height","details","alignItems","column","flexBasis","helper","borderLeft","divider","padding","spacing","link","primary","main","textDecoration","paper","textAlign","TranscriptLine","props","classes","turn","Emoji","sentiment","Sentiment","fontWeight","speaker","AGENT","start_time","CUSTOMER","getSpeaker","hasOwnProperty","channel","speaker_label","getTranscriptTurns","transcript","agentOrder","parseInt","turns","numChannels","labels","agentChannel","agentLabel","console","log","customerOrder","filter","t","map","getCategories","call_motivation_status","call_resolution_status","CallCard","playing","audioURI","currentKey","currentSentiment","callMotivation","callResolution","expanded","showing","fullTranscriptURI","e","toggleTranscript","analysisURI","event","stopPropagation","user","lastModified","margin","togglePlay","playIcon","transcriptionJobName","paddingBottom","i"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport PlayArrowIcon from '@material-ui/icons/PlayCircleFilled'\nimport PauseIcon from '@material-ui/icons/PauseCircleFilled'\n\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport Divider from '@material-ui/core/Divider'\nimport Grid from '@material-ui/core/Grid'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport SentimentVerySatisfiedIcon from '@material-ui/icons/SentimentVerySatisfied'\nimport SentimentSatisfiedIcon from '@material-ui/icons/SentimentSatisfied'\nimport SentimentVeryDissatisfiedIcon from '@material-ui/icons/SentimentVeryDissatisfied'\nimport Chip from '@material-ui/core/Chip'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n  },\n  chips: {\n    marginRight: 5\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    color: theme.palette.text.secondary,\n  },\n  icon: {\n    verticalAlign: 'bottom',\n    height: 20,\n    width: 20,\n  },\n  details: {\n    alignItems: 'center',\n  },\n  column: {\n    flexBasis: '33.33%',\n  },\n  helper: {\n    borderLeft: `2px solid ${theme.palette.divider}`,\n    padding: theme.spacing(1, 2),\n  },\n  link: {\n    color: theme.palette.primary.main,\n    textDecoration: 'none',\n    '&:hover': {\n      textDecoration: 'underline',\n    },\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  }\n}));\n\nfunction TranscriptLine(props) {\n  const classes = props.classes\n  if (!props.turn) return null\n  return (\n    <Grid container item xs={12}>\n      <Grid item xs={10}>\n        <Grid item xs={10}>\n          {Emoji[props.turn.sentiment.Sentiment]}\n          <Typography style={{ fontWeight: 'bold' }} className={classes.heading} component=\"span\">{props.turn.speaker === AGENT ? 'Agent ' : 'Customer '}</Typography>\n          <Typography style={{ color: '#4186b2' }} className={classes.secondaryHeading} component=\"span\">\n            {props.turn.start_time}\n          </Typography>\n        </Grid>\n        <Grid item xs={10}>{props.turn.text}</Grid>\n      </Grid>\n    </Grid>)\n}\n\nconst Emoji = {\n  'NEGATIVE': <SentimentVeryDissatisfiedIcon style={{ color: \"#ff9495\" }} />,\n  'POSITIVE': <SentimentVerySatisfiedIcon style={{ color: \"#6cd3aa\" }} />,\n  'NEUTRAL': <SentimentSatisfiedIcon style={{ color: \"#d5d5d5\" }} />\n}\n\nconst AGENT = 'AGENT'\nconst CUSTOMER = 'CUSTOMER'\n\nconst getSpeaker = (turn) => turn.hasOwnProperty('channel') ? turn.channel : turn.speaker_label\n\nfunction getTranscriptTurns(transcript) {\n  const agentOrder = parseInt(transcript.sentiment.turns.numChannels === 2 ? transcript.labels.agentChannel : transcript.labels.agentLabel)\n  console.log(agentOrder)\n  const customerOrder = agentOrder === 0 ? 1 : 0\n\n  transcript.sentiment.turns.filter(t => getSpeaker(t) === customerOrder).map( t => t.speaker =  CUSTOMER)\n  transcript.sentiment.turns.filter(t => getSpeaker(t) === agentOrder).map( t => t.speaker =  AGENT)\n  \n  console.log(transcript.sentiment.turns)\n  \n  return transcript.sentiment.turns\n}\n\nconst getCategories = (sentiment) => ([\n  (sentiment || {}).call_motivation_status,\n  (sentiment || {}).call_resolution_status\n])\n\nexport default function CallCard(props) {\n  const classes = useStyles();\n  const playing = props.playing && props.transcript.audioURI === props.currentKey\n  const [callMotivation, callResolution] = getCategories(props.currentSentiment)\n  const expanded = (props.showing && props.currentKey === props.transcript.fullTranscriptURI) || (props.showing && props.currentKey === props.transcript.audioURI)\n  return (\n    <div className={classes.root}>\n      <ExpansionPanel\n        expanded={expanded}\n        onClick={(e) => props.toggleTranscript(e, props.transcript.fullTranscriptURI, props.transcript.analysisURI)}\n        onFocus={event => event.stopPropagation()}\n      >\n        <ExpansionPanelSummary\n          expandIcon={<ExpandMoreIcon />}\n          aria-controls=\"panel1c-content\"\n          id=\"panel1c-header\" >\n          <div className={classes.column}>\n            <Typography className={classes.heading}>Contact Summary</Typography>\n            <Typography className={classes.secondaryHeading}>Uploaded: {props.transcript.user}</Typography>\n            <Typography className={classes.secondaryHeading}>Last Modified: {props.transcript.lastModified}</Typography>\n          </div>\n          <div className={classes.column} style={{ margin: 'auto 0' }}>\n            <IconButton aria-label=\"play/pause\" onClick={(e) => props.togglePlay(e, props.transcript.audioURI)} onFocus={event => event.stopPropagation()}>\n              {!playing && <PlayArrowIcon className={classes.playIcon} />}\n              {playing && <PauseIcon className={classes.playIcon} />}\n            </IconButton>\n            <Typography className={classes.secondaryHeading}>{props.transcript.transcriptionJobName}</Typography>\n          </div>\n        </ExpansionPanelSummary>\n        <Divider />\n        <ExpansionPanelDetails className={classes.details}>\n          {props.currentSentiment && expanded\n          ? <div className={classes.root}>\n              <Grid container spacing={1}>\n                <Grid item xs={12} style={{ paddingBottom: '.5em' }}>\n                  <Typography style={{ fontWeight: 'bold' }} className={classes.secondaryHeading} component=\"span\">Categories</Typography>\n                </Grid>\n                <Grid container item xs={12} style={{ paddingBottom: '.5em' }} >\n                    {callMotivation && <Chip className={classes.chips} label={callMotivation} color=\"primary\" />}\n                    {callResolution && <Chip className={classes.chips} label={callResolution} color=\"primary\" />}\n                </Grid>\n                <Grid item xs={12}>\n                  <Typography style={{ fontWeight: 'bold' }} className={classes.secondaryHeading} component=\"span\">Transcript</Typography>\n                </Grid>\n                {getTranscriptTurns({ labels: props.transcript.labels, sentiment: props.currentSentiment }).map((turn, i) => (\n                  <TranscriptLine\n                    key={\"transcript-line-\" + i}\n                    turn={turn} classes={classes}\n                  />\n                ))}\n              </Grid>\n            </div>\n          : <CircularProgress/>}\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}