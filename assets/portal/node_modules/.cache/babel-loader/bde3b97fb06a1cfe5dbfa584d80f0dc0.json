{"ast":null,"code":"import _classCallCheck from\"/Users/sshvans/Documents/work/quickstart/quickstart-onica-cci-postcall-analytics/assets/portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sshvans/Documents/work/quickstart/quickstart-onica-cci-postcall-analytics/assets/portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sshvans/Documents/work/quickstart/quickstart-onica-cci-postcall-analytics/assets/portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sshvans/Documents/work/quickstart/quickstart-onica-cci-postcall-analytics/assets/portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Auth,Hub}from'aws-amplify';import history from\"../history\";var CognitoAuth=/*#__PURE__*/function(_Component){_inherits(CognitoAuth,_Component);var _super=_createSuper(CognitoAuth);function CognitoAuth(props){var _this;_classCallCheck(this,CognitoAuth);_this=_super.call(this,props);// let the Hub module listen on Auth events\nHub.listen('auth',function(data){switch(data.payload.event){case'signIn':history.push('/calls');_this.setState({authState:'signedIn',authData:data.payload.data});break;case'signIn_failure':break;default:break;}});return _this;}_createClass(CognitoAuth,[{key:\"componentDidMount\",value:function componentDidMount(){// we only want to do this if code isn't\nif(!this.props.location||!this.props.location.search.startsWith(\"?code=\")){Auth.currentAuthenticatedUser().then(function(user){history.push('/calls');}).catch(function(e){Auth.federatedSignIn();});}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"});}}]);return CognitoAuth;}(Component);export default CognitoAuth;","map":{"version":3,"sources":["/Users/sshvans/Documents/work/quickstart/quickstart-onica-cci-postcall-analytics/assets/portal/src/auth/CognitoAuth.js"],"names":["React","Component","Auth","Hub","history","CognitoAuth","props","listen","data","payload","event","push","setState","authState","authData","location","search","startsWith","currentAuthenticatedUser","then","user","catch","e","federatedSignIn"],"mappings":"o0BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,IAAR,CAAcC,GAAd,KAAwB,aAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,C,GAEMC,CAAAA,W,0GACJ,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EAEA;AACAH,GAAG,CAACI,MAAJ,CAAW,MAAX,CAAmB,SAACC,IAAD,CAAU,CAC3B,OAAQA,IAAI,CAACC,OAAL,CAAaC,KAArB,EACE,IAAK,QAAL,CACEN,OAAO,CAACO,IAAR,CAAa,QAAb,EACA,MAAKC,QAAL,CAAc,CAACC,SAAS,CAAE,UAAZ,CAAwBC,QAAQ,CAAEN,IAAI,CAACC,OAAL,CAAaD,IAA/C,CAAd,EACA,MACF,IAAK,gBAAL,CACE,MACF,QACE,MARJ,CAUD,CAXD,EAJiB,aAgBlB,C,qFAEmB,CAClB;AACA,GAAI,CAAC,KAAKF,KAAL,CAAWS,QAAZ,EAAwB,CAAC,KAAKT,KAAL,CAAWS,QAAX,CAAoBC,MAApB,CAA2BC,UAA3B,CAAsC,QAAtC,CAA7B,CAA8E,CAC5Ef,IAAI,CAACgB,wBAAL,GAAgCC,IAAhC,CAAqC,SAAAC,IAAI,CAAI,CAC3ChB,OAAO,CAACO,IAAR,CAAa,QAAb,EACD,CAFD,EAEGU,KAFH,CAES,SAAAC,CAAC,CAAI,CACZpB,IAAI,CAACqB,eAAL,GACD,CAJD,EAKD,CACF,C,uCAEQ,CACP,mBACI,2BAAK,SAAS,CAAC,KAAf,EADJ,CAGD,C,yBAlCuBtB,S,EAqC1B,cAAeI,CAAAA,WAAf","sourcesContent":["import React, {Component} from 'react';\nimport {Auth, Hub} from 'aws-amplify';\nimport history from \"../history\";\n\nclass CognitoAuth extends Component {\n  constructor(props) {\n    super(props);\n\n    // let the Hub module listen on Auth events\n    Hub.listen('auth', (data) => {\n      switch (data.payload.event) {\n        case 'signIn':\n          history.push('/calls');\n          this.setState({authState: 'signedIn', authData: data.payload.data});\n          break;\n        case 'signIn_failure':\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  componentDidMount() {\n    // we only want to do this if code isn't\n    if (!this.props.location || !this.props.location.search.startsWith(\"?code=\")) {\n      Auth.currentAuthenticatedUser().then(user => {\n        history.push('/calls');\n      }).catch(e => {\n        Auth.federatedSignIn();\n      });\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"App\"/>\n    );\n  }\n}\n\nexport default CognitoAuth;"]},"metadata":{},"sourceType":"module"}